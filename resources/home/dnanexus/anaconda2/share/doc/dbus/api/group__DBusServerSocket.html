<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>D-Bus: DBusServer implementations for SOCKET</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>DBusServer implementations for SOCKET<br>
<small>
[<a class="el" href="group__DBusInternals.html">D-Bus secret internal implementation details</a>]</small>
</h1>Implementation details of <a class="el" href="structDBusServer.html">DBusServer</a> on SOCKET.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDBusServerSocket.html">DBusServerSocket</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation details of <a class="el" href="structDBusServerSocket.html">DBusServerSocket</a>.  <a href="structDBusServerSocket.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gce7aafbe2ae3cdbfbce3b01972dde0ce"></a><!-- doxytag: member="DBusServerSocket::DBusServerSocket" ref="gce7aafbe2ae3cdbfbce3b01972dde0ce" args="" -->
typedef <a class="el" href="structDBusServerSocket.html">DBusServerSocket</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusServerSocket.html#gce7aafbe2ae3cdbfbce3b01972dde0ce">DBusServerSocket</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opaque object representing a Socket server implementation. <br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structDBusServer.html">DBusServer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusServerSocket.html#gc670783fbeff989b171638439d8c2d1f">_dbus_server_new_for_socket</a> (<a class="el" href="structDBusSocket.html">DBusSocket</a> *fds, int n_fds, const <a class="el" href="structDBusString.html">DBusString</a> *address, <a class="el" href="structDBusNonceFile.html">DBusNonceFile</a> *noncefile, <a class="el" href="structDBusError.html">DBusError</a> *error)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new server listening on the given file descriptor.  <a href="#gc670783fbeff989b171638439d8c2d1f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structDBusServer.html">DBusServer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusServerSocket.html#g047d05c427e9a1fc5823fdfdcec5c5f6">_dbus_server_new_for_tcp_socket</a> (const char *host, const char *bind, const char *port, const char *family, <a class="el" href="structDBusError.html">DBusError</a> *error, <a class="el" href="group__DBusTypes.html#g39c9cb0f3a2a8ad6f55cc4855d035349">dbus_bool_t</a> use_nonce)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new server listening on TCP.  <a href="#g047d05c427e9a1fc5823fdfdcec5c5f6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">DBusServerListenResult&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusServerSocket.html#g90a89943c15760592e5ddce31bf0e021">_dbus_server_listen_socket</a> (<a class="el" href="structDBusAddressEntry.html">DBusAddressEntry</a> *entry, <a class="el" href="structDBusServer.html">DBusServer</a> **server_p, <a class="el" href="structDBusError.html">DBusError</a> *error)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tries to interpret the address entry for various socket-related addresses (well, currently only tcp and nonce-tcp).  <a href="#g90a89943c15760592e5ddce31bf0e021"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusServerSocket.html#ga9518c980672f1b8dba8f5a981b93fd9">_dbus_server_socket_own_filename</a> (<a class="el" href="structDBusServer.html">DBusServer</a> *server, char *filename)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is a bad hack since it's really unix domain socket specific.  <a href="#ga9518c980672f1b8dba8f5a981b93fd9"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Implementation details of <a class="el" href="structDBusServer.html">DBusServer</a> on SOCKET. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g90a89943c15760592e5ddce31bf0e021"></a><!-- doxytag: member="dbus-server-socket.c::_dbus_server_listen_socket" ref="g90a89943c15760592e5ddce31bf0e021" args="(DBusAddressEntry *entry, DBusServer **server_p, DBusError *error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DBusServerListenResult _dbus_server_listen_socket           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusAddressEntry.html">DBusAddressEntry</a> *&nbsp;</td>
          <td class="paramname"> <em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusServer.html">DBusServer</a> **&nbsp;</td>
          <td class="paramname"> <em>server_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusError.html">DBusError</a> *&nbsp;</td>
          <td class="paramname"> <em>error</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tries to interpret the address entry for various socket-related addresses (well, currently only tcp and nonce-tcp). 
<p>
Sets error if the result is not OK.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>entry</em>&nbsp;</td><td>an address entry </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>server_p</em>&nbsp;</td><td>a new <a class="el" href="structDBusServer.html">DBusServer</a>, or <a class="el" href="group__DBusMacros.html#g070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> on failure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>error</em>&nbsp;</td><td>location to store rationale for failure on bad address </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the outcome </dd></dl>

<p>
Definition at line <a class="el" href="dbus-server-socket_8c-source.html#l00536">536</a> of file <a class="el" href="dbus-server-socket_8c-source.html">dbus-server-socket.c</a>.
<p>
References <a class="el" href="dbus-server-socket_8c-source.html#l00399">_dbus_server_new_for_tcp_socket()</a>, <a class="el" href="dbus-address_8c-source.html#l00227">dbus_address_entry_get_method()</a>, <a class="el" href="dbus-address_8c-source.html#l00244">dbus_address_entry_get_value()</a>, <a class="el" href="group__DBusMacros.html#ga93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="el" href="group__DBusMacros.html#g070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="group__DBusMacros.html#ga8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>.
</div>
</div><p>
<a class="anchor" name="gc670783fbeff989b171638439d8c2d1f"></a><!-- doxytag: member="dbus-server-socket.c::_dbus_server_new_for_socket" ref="gc670783fbeff989b171638439d8c2d1f" args="(DBusSocket *fds, int n_fds, const DBusString *address, DBusNonceFile *noncefile, DBusError *error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDBusServer.html">DBusServer</a>* _dbus_server_new_for_socket           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusSocket.html">DBusSocket</a> *&nbsp;</td>
          <td class="paramname"> <em>fds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>n_fds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structDBusString.html">DBusString</a> *&nbsp;</td>
          <td class="paramname"> <em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusNonceFile.html">DBusNonceFile</a> *&nbsp;</td>
          <td class="paramname"> <em>noncefile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusError.html">DBusError</a> *&nbsp;</td>
          <td class="paramname"> <em>error</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new server listening on the given file descriptor. 
<p>
The file descriptor should be nonblocking (use _dbus_set_fd_nonblocking() to make it so). The file descriptor should be listening for connections, that is, listen() should have been successfully invoked on it. The server will use accept() to accept new client connections.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fds</em>&nbsp;</td><td>list of file descriptors. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n_fds</em>&nbsp;</td><td>number of file descriptors </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>address</em>&nbsp;</td><td>the server's address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>noncefile</em>&nbsp;</td><td>to be used for authentication (NULL if not needed) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>error</em>&nbsp;</td><td>location to store reason for failure </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the new server, or <a class="el" href="group__DBusMacros.html#g070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> on OOM or other error. </dd></dl>

<p>
Definition at line <a class="el" href="dbus-server-socket_8c-source.html#l00285">285</a> of file <a class="el" href="dbus-server-socket_8c-source.html">dbus-server-socket.c</a>.
<p>
References <a class="el" href="dbus-server_8c-source.html#l00296">_dbus_server_add_watch()</a>, <a class="el" href="dbus-server_8c-source.html#l00201">_dbus_server_finalize_base()</a>, <a class="el" href="dbus-server_8c-source.html#l00112">_dbus_server_init_base()</a>, <a class="el" href="dbus-server_8c-source.html#l00312">_dbus_server_remove_watch()</a>, <a class="el" href="dbus-watch_8c-source.html#l00088">_dbus_watch_new()</a>, <a class="el" href="dbus-server-socket_8c-source.html#l00052">base</a>, <a class="el" href="dbus-memory_8h-source.html#l00058">dbus_new</a>, <a class="el" href="dbus-memory_8h-source.html#l00059">dbus_new0</a>, <a class="el" href="dbus-server-socket_8c-source.html#l00054">fds</a>, <a class="el" href="dbus-server-socket_8c-source.html#l00053">n_fds</a>, <a class="el" href="dbus-server-socket_8c-source.html#l00057">noncefile</a>, <a class="el" href="group__DBusMacros.html#g070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="group__DBusMacros.html#ga8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, and <a class="el" href="dbus-server-socket_8c-source.html#l00055">watch</a>.
<p>
Referenced by <a class="el" href="dbus-server-unix_8c-source.html#l00054">_dbus_server_listen_platform_specific()</a>, <a class="el" href="dbus-server-unix_8c-source.html#l00301">_dbus_server_new_for_domain_socket()</a>, <a class="el" href="dbus-server-launchd_8c-source.html#l00066">_dbus_server_new_for_launchd()</a>, and <a class="el" href="dbus-server-socket_8c-source.html#l00399">_dbus_server_new_for_tcp_socket()</a>.
</div>
</div><p>
<a class="anchor" name="g047d05c427e9a1fc5823fdfdcec5c5f6"></a><!-- doxytag: member="dbus-server-socket.c::_dbus_server_new_for_tcp_socket" ref="g047d05c427e9a1fc5823fdfdcec5c5f6" args="(const char *host, const char *bind, const char *port, const char *family, DBusError *error, dbus_bool_t use_nonce)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDBusServer.html">DBusServer</a>* _dbus_server_new_for_tcp_socket           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>bind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusError.html">DBusError</a> *&nbsp;</td>
          <td class="paramname"> <em>error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DBusTypes.html#g39c9cb0f3a2a8ad6f55cc4855d035349">dbus_bool_t</a>&nbsp;</td>
          <td class="paramname"> <em>use_nonce</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new server listening on TCP. 
<p>
If host is NULL, it will default to localhost. If bind is NULL, it will default to the value for the host parameter, and if that is NULL, then localhost If bind is a hostname, it will be resolved and will listen on all returned addresses. If family is NULL, hostname resolution will try all address families, otherwise it can be ipv4 or ipv6 to restrict the addresses considered.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>host</em>&nbsp;</td><td>the hostname to report for the listen address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bind</em>&nbsp;</td><td>the hostname to listen on </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>the port to listen on or 0 to let the OS choose </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>error</em>&nbsp;</td><td>location to store reason for failure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>use_nonce</em>&nbsp;</td><td>whether to use a nonce for low-level authentication (nonce-tcp transport) or not (tcp transport) </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the new server, or <a class="el" href="group__DBusMacros.html#g070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> on failure. </dd></dl>

<p>
Definition at line <a class="el" href="dbus-server-socket_8c-source.html#l00399">399</a> of file <a class="el" href="dbus-server-socket_8c-source.html">dbus-server-socket.c</a>.
<p>
References <a class="el" href="dbus-address_8c-source.html#l00104">_dbus_address_append_escaped()</a>, <a class="el" href="dbus-sysdeps-unix_8c-source.html#l00283">_dbus_close_socket()</a>, <a class="el" href="dbus-sysdeps-unix_8c-source.html#l01460">_dbus_listen_tcp_socket()</a>, <a class="el" href="dbus-server-socket_8c-source.html#l00285">_dbus_server_new_for_socket()</a>, <a class="el" href="dbus-string_8c-source.html#l00935">_dbus_string_append()</a>, <a class="el" href="dbus-string_8c-source.html#l00259">_dbus_string_free()</a>, <a class="el" href="dbus-string_8c-source.html#l00175">_dbus_string_init()</a>, <a class="el" href="dbus-string_8c-source.html#l00190">_dbus_string_init_const()</a>, <a class="el" href="dbus-protocol_8h-source.html#l00357">DBUS_ERROR_NO_MEMORY</a>, <a class="el" href="dbus-memory_8c-source.html#l00701">dbus_free()</a>, <a class="el" href="dbus-memory_8h-source.html#l00059">dbus_new0</a>, <a class="el" href="dbus-errors_8c-source.html#l00354">dbus_set_error()</a>, and <a class="el" href="group__DBusMacros.html#g070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>.
<p>
Referenced by <a class="el" href="dbus-server-win_8c-source.html#l00050">_dbus_server_listen_platform_specific()</a>, and <a class="el" href="dbus-server-socket_8c-source.html#l00536">_dbus_server_listen_socket()</a>.
</div>
</div><p>
<a class="anchor" name="ga9518c980672f1b8dba8f5a981b93fd9"></a><!-- doxytag: member="dbus-server-socket.c::_dbus_server_socket_own_filename" ref="ga9518c980672f1b8dba8f5a981b93fd9" args="(DBusServer *server, char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _dbus_server_socket_own_filename           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusServer.html">DBusServer</a> *&nbsp;</td>
          <td class="paramname"> <em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is a bad hack since it's really unix domain socket specific. 
<p>
Also, the function weirdly adopts ownership of the passed-in string.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>server</em>&nbsp;</td><td>a socket server </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>socket filename to report/delete </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dbus-server-socket_8c-source.html#l00589">589</a> of file <a class="el" href="dbus-server-socket_8c-source.html">dbus-server-socket.c</a>.
<p>
References <a class="el" href="dbus-server-socket_8c-source.html#l00056">socket_name</a>.
<p>
Referenced by <a class="el" href="dbus-server-unix_8c-source.html#l00301">_dbus_server_new_for_domain_socket()</a>.
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on 13 Sep 2016 for D-Bus by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
